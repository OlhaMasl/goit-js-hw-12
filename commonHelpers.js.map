{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios'; \n\nexport async function searchImage(query, page) {\n\n    const BASE_URL = \"https://pixabay.com/api/\";\n\n    const params = new URLSearchParams({\n        key: \"44175517-753270956c641713e32eb091d\",\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: page,\n        per_page: 15,\n    });\n\n    const url = `${BASE_URL}?${params}`;\n\n    const result = await axios(url);\n    return result.data;\n};\n\n","\n\nexport function imagesTemplate(images) {\n   return images.map((image) => {\n       return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n    <ul class=\"image-info\">\n    <li class=\"info-item\"><div class=\"item-text\">Likes</div><div class=\"item-value\">${image.likes}</div></li>\n    <li class=\"info-item\"><div class=\"item-text\">Views</div><div class=\"item-value\">${image.views}</div></li>\n    <li class=\"info-item\"><div class=\"item-text\">Comments</div><div class=\"item-value\">${image.comments}</div></li>\n    <li class=\"info-item\"><div class=\"item-text\">Downloads</div><div class=\"item-value\">${image.downloads}</div></li>\n    </ul>\n  </a>\n</li>`\n    }).join(\"\");\n}\n\n\n\n","import { searchImage } from \"./js/pixabay-api\";\nimport { imagesTemplate } from \"./js/render-functions\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst formEL = document.querySelector(\".form\");\nconst galleryList = document.querySelector(\".gallery\");\nconst loaderEl = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more-btn\");\n\nconst galleryModel = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionPosition: \"bottom\",\n    captionDelay: 250,\n});\n\n\nlet InputValue = null;\nlet page = null;\nlet totalPages;\n\nformEL.addEventListener(\"submit\", onSubmitForm);\n\nfunction onSubmitForm(evt) {\n    evt.preventDefault();\n    page = 1;\n   InputValue = evt.target.elements.search.value.trim();\n    if (InputValue === \"\") {\n      return  \n    };\n    evt.target.reset();\n    loaderEl.classList.remove(\"is-hiding\");\n    searchImage(InputValue, page).then(data => {\n        // console.log(data);\n        if (data.total === 0) {\n         iziToast.show({\n              message: 'Sorry, there are no images matching your search query. Please try again!',\n              messageColor: 'white',\n              backgroundColor: 'red',\n             position: 'topRight',\n          });\n        }\n        const markup = imagesTemplate(data.hits);\n        galleryList.innerHTML = markup;\n        galleryModel.refresh();\n        totalPages = Math.ceil(data.totalHits / data.hits.length);\n        if (totalPages > 1) {\n           loadMore.classList.remove(\"is-hiding\"); \n        }\n        \n    }).catch(error => {\n        // console.log(error);\n        iziToast.show({\n            message: 'Internal server error!',\n            messageColor: 'white',\n            backgroundColor: 'red',\n            position: 'topRight',\n        })\n          \n    }).finally(() => {\n        loaderEl.classList.add(\"is-hiding\");\n    });\n\n};\n\nloadMore.addEventListener(\"click\", onClickLoadMore);\n\nasync function onClickLoadMore() {\n    page += 1;\n    loadMore.disabled = true;\n    loaderEl.classList.remove(\"is-hiding\");\n    try {\n        const data = await searchImage(InputValue, page);\n        // console.log(data);\n        galleryList.insertAdjacentHTML(\"beforeend\", imagesTemplate(data.hits));\n        galleryModel.refresh();\n        if (page >= totalPages) {\n            loadMore.removeEventListener(\"click\", onClickLoadMore);\n            loadMore.classList.add(\"is-hiding\");\n            iziToast.show({\n              message: \"We are sorry, but you've reached the end of search results.\",\n              messageColor: \"black\",\n              backgroundColor: \"lightblue\",\n             position: \"topRight\",\n          });\n        }\n        const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight *2,\n            behavior: \"smooth\",\n        })\n    } catch (error) {\n        iziToast.show({\n            message: 'Internal server error!',\n            messageColor: 'white',\n            backgroundColor: 'red',\n            position: 'topRight',\n        })\n    } finally {\n        loadMore.disabled = false;\n        loaderEl.classList.add(\"is-hiding\");\n    }\n}\n\n     "],"names":["searchImage","query","page","BASE_URL","params","url","axios","imagesTemplate","images","image","formEL","galleryList","loaderEl","loadMore","galleryModel","SimpleLightbox","InputValue","totalPages","onSubmitForm","evt","data","iziToast","markup","error","onClickLoadMore","cardHeight"],"mappings":"owBAGO,eAAeA,EAAYC,EAAOC,EAAM,CAE3C,MAAMC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EAClB,CAAK,EAEKG,EAAM,GAAGF,CAAQ,IAAIC,CAAM,GAGjC,OADe,MAAME,EAAMD,CAAG,GAChB,IAClB,CCnBO,SAASE,EAAeC,EAAQ,CACpC,OAAOA,EAAO,IAAKC,GACR;AAAA,kCACoBA,EAAM,aAAa;AAAA;AAAA;AAAA,aAGxCA,EAAM,YAAY;AAAA,aAClBA,EAAM,IAAI;AAAA;AAAA;AAAA,sFAG+DA,EAAM,KAAK;AAAA,sFACXA,EAAM,KAAK;AAAA,yFACRA,EAAM,QAAQ;AAAA,0FACbA,EAAM,SAAS;AAAA;AAAA;AAAA,MAIpG,EAAE,KAAK,EAAE,CACd,CCNA,MAAMC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAW,SAAS,cAAc,gBAAgB,EAElDC,EAAe,IAAIC,EAAe,aAAc,CAClD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClB,CAAC,EAGD,IAAIC,EAAa,KACbd,EAAO,KACPe,EAEJP,EAAO,iBAAiB,SAAUQ,CAAY,EAE9C,SAASA,EAAaC,EAAK,CACvBA,EAAI,eAAc,EAClBjB,EAAO,EACRc,EAAaG,EAAI,OAAO,SAAS,OAAO,MAAM,OACzCH,IAAe,KAGnBG,EAAI,OAAO,QACXP,EAAS,UAAU,OAAO,WAAW,EACrCZ,EAAYgB,EAAYd,CAAI,EAAE,KAAKkB,GAAQ,CAEnCA,EAAK,QAAU,GAClBC,EAAS,KAAK,CACT,QAAS,2EACT,aAAc,QACd,gBAAiB,MAClB,SAAU,UACvB,CAAW,EAEH,MAAMC,EAASf,EAAea,EAAK,IAAI,EACvCT,EAAY,UAAYW,EACxBR,EAAa,QAAO,EACpBG,EAAa,KAAK,KAAKG,EAAK,UAAYA,EAAK,KAAK,MAAM,EACpDH,EAAa,GACdJ,EAAS,UAAU,OAAO,WAAW,CAGhD,CAAK,EAAE,MAAMU,GAAS,CAEdF,EAAS,KAAK,CACV,QAAS,yBACT,aAAc,QACd,gBAAiB,MACjB,SAAU,UACtB,CAAS,CAET,CAAK,EAAE,QAAQ,IAAM,CACbT,EAAS,UAAU,IAAI,WAAW,CAC1C,CAAK,EAEL,CAEAC,EAAS,iBAAiB,QAASW,CAAe,EAElD,eAAeA,GAAkB,CAC7BtB,GAAQ,EACRW,EAAS,SAAW,GACpBD,EAAS,UAAU,OAAO,WAAW,EACrC,GAAI,CACA,MAAMQ,EAAO,MAAMpB,EAAYgB,EAAYd,CAAI,EAE/CS,EAAY,mBAAmB,YAAaJ,EAAea,EAAK,IAAI,CAAC,EACrEN,EAAa,QAAO,EAChBZ,GAAQe,IACRJ,EAAS,oBAAoB,QAASW,CAAe,EACrDX,EAAS,UAAU,IAAI,WAAW,EAClCQ,EAAS,KAAK,CACZ,QAAS,8DACT,aAAc,QACd,gBAAiB,YAClB,SAAU,UACvB,CAAW,GAGH,MAAMI,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKA,EAAY,EACjB,SAAU,QACtB,CAAS,CACJ,MAAe,CACZJ,EAAS,KAAK,CACV,QAAS,yBACT,aAAc,QACd,gBAAiB,MACjB,SAAU,UACtB,CAAS,CACT,QAAc,CACNR,EAAS,SAAW,GACpBD,EAAS,UAAU,IAAI,WAAW,CACrC,CACL"}